<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ôn tập Giữa kì I – Toán 8 (Kết nối tri thức)</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" />
<style>
  :root{--bg:#f6f8fc;--card:#fff;--ink:#0f172a;--muted:#64748b;--brand:#2563eb;--ok:#10b981;--bad:#ef4444;--hint:#e0f2fe;--ring:#e5e7eb}
  html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto}
  .wrap{max-width:1080px;margin:auto;padding:20px}
  h1{font-weight:800;letter-spacing:.2px;text-align:center;margin:10px 0 8px}
  .lead{color:var(--muted);text-align:center;margin:0 0 18px}
  .sec-title{font-size:22px;font-weight:900;text-align:center;margin:26px 0 10px}
  .card{background:var(--card);border-radius:14px;box-shadow:0 6px 22px rgba(0,0,0,.06);padding:16px 18px;margin:14px 0}
  .stem{font-weight:800;margin-bottom:10px}
  .opt{display:flex;gap:10px;align-items:flex-start;padding:8px 10px;border-radius:10px;transition:box-shadow .15s,background .15s}
  .opt:hover{box-shadow:0 0 0 2px var(--ring) inset}
  .opt input{margin-top:4px}
  .hint{background:var(--hint);border-radius:10px;padding:10px 12px;margin-top:8px;display:none}
  img.figure{max-width:100%;height:auto;border-radius:8px;display:block;margin:8px 0}
  .actions{display:flex;gap:10px;justify-content:center;margin:18px 0}
  button{border:0;border-radius:12px;padding:10px 16px;font-weight:700;cursor:pointer}
  .btn{background:var(--brand);color:#fff}
  .btn-ghost{background:#e2e8f0}
  #resultbar{background:#fff;border-radius:12px;padding:10px 14px;box-shadow:0 3px 12px rgba(0,0,0,.05);text-align:center}
  .footnote{color:var(--muted);font-size:14px;text-align:center;margin-top:6px}
</style>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" defer></script>
</head>
<body>
<div class="wrap">
  <h1>Ôn tập Giữa kì I – Toán 8</h1>
  <p class="lead">Theo SGK Kết nối tri thức &amp; cuộc sống. Làm xong mới bấm <b>Chấm điểm</b> ở <u>dưới cùng</u>.</p>

  <div class="sec-title">PHẦN TRẮC NGHIỆM</div>
  <p class="lead">Mỗi câu chọn <b>1</b> đáp án đúng.</p>
  <div id="mcqs"></div>

  <div class="sec-title">PHẦN MỆNH ĐỀ (CHỌN CÂU <span style="color:#16a34a">ĐÚNG</span>)</div>
  <p class="lead">Tick vào <b>tất cả</b> mệnh đề <b>ĐÚNG</b>. Tick nhầm mệnh đề sai chỉ tô đỏ (không trừ điểm).</p>
  <div id="ds"></div>

  <div class="actions">
    <button class="btn-ghost" id="btnKeep">Làm lại (giữ thứ tự)</button>
    <button class="btn-ghost" id="btnShuffle">Làm lại (xáo trộn)</button>
    <button class="btn" id="btnGrade">Chấm điểm</button>
  </div>
  <div id="resultbar">Chưa chấm. Điểm sẽ hiện tại đây.</div>
  <div class="footnote">Sau khi chấm sẽ tự cuộn xuống vùng kết quả này.</div>
</div>

<script>
/* ====================== DỮ LIỆU ====================== */
const DATA={mcqs:[
  {id:"M1",stem:"Trong các biểu thức sau, <b>đơn thức</b> là:",options:["\\(2x^{2}+3y\\)","\\(\\dfrac{2}{3xy}\\)","\\((-5)x^{2}y^{3}\\)","\\(x^{2}-2x\\)"],answer:2,hint:"Đơn thức = tích (số)×(biến) với số mũ nguyên không âm; không có cộng/trừ."},
  {id:"M2",stem:"Trong các biểu thức sau, <b>đa thức</b> là:",options:["\\(\\dfrac{2}{x^{3}y}-1\\)","\\(\\dfrac{x}{y}+3\\)","\\(5x-4y+7\\)","\\(x^{2}y+\\dfrac{1}{x}\\)"],answer:2,hint:"Đa thức là tổng các đơn thức có mũ nguyên không âm; không có biến ở mẫu."},
  {id:"M3",stem:"Đơn thức <b>đồng dạng</b> với \\(\\tfrac{2}{3}xyz\\) là:",options:["\\(\\tfrac{3}{2}xyz\\)","\\(2x^{2}yz\\)","\\(2xy^{2}z\\)","\\(\\tfrac{2}{3}x^{2}y^{2}z\\)"],answer:0,hint:"Đồng dạng ⇔ phần biến & số mũ từng biến giống nhau (khác hệ số được)."},
  {id:"M4",stem:"Tính: \\(\\tfrac{5}{2}xy-\\tfrac{1}{2}xy=\\,?\\)",options:["\\(2xy\\)","\\(3xy\\)","\\(\\tfrac{2}{3}xy\\)","\\(\\tfrac{4}{2}xy\\)"],answer:0,hint:"Cùng đơn thức \\(xy\\): \\((\\tfrac{5}{2}-\\tfrac{1}{2})xy=2xy\\)."},
  {id:"M5",stem:"Kết quả \\(\\dfrac{x^{2}y^{3}}{xy}\\) là:",options:["\\(xy^{2}\\)","\\(x^{3}y^{3}\\)","\\(x\\,y^{2}\\)","\\(x\\,y^{4}\\)"],answer:0,hint:"Trừ mũ tương ứng: \\(x^{2}:x=x\\), \\(y^{3}:y=y^{2}\\)."},
  {id:"M6",stem:"Cho \\(M+5x^{2}-2xy=6x^{2}+10xy-y^{2}\\). Tính \\(M\\).",options:["\\(x^{2}+12xy-y^{2}\\)","\\(x^{2}+12xy+y^{2}\\)","\\(x^{2}+8xy-y^{2}\\)","\\(x^{2}+7xy-y^{2}\\)"],answer:0,hint:"Chuyển vế/thu gọn: \\(M=(6x^{2}+10xy-y^{2})-(5x^{2}-2xy)\\)."},
  {id:"M7",stem:"Diện tích HCN có dài \\(x+2\\), rộng \\(y+3\\):",options:["\\(S=(x+2)(y+3)=xy+3x+2y+6\\)","\\(xy-3x+2y+6\\)","\\(xy+3x-2y+6\\)","\\(xy-3x+2y-6\\)"],answer:0,hint:"Công thức diện tích hình chữ nhật."},
  {id:"M8",stem:"Đơn thức <b>đã thu gọn</b>:",options:["\\(3\\cdot x\\cdot x\\cdot y\\)","\\(\\tfrac14\\cdot 4x^{2}y\\)","\\(2^{3}\\cdot3^{4}\\,xy^{2}z\\)","\\(2^{2}\\cdot3\\cdot x\\cdot y\\cdot x\\cdot z\\)"],answer:2,hint:"Đã gộp mũ & rút gọn hệ số; (1)(4) chưa gộp, (2) hệ số =1."},
  {id:"M9",stem:"Trong các hình sau, <b>hình vuông</b> là:",img:"img/cau9.png",options:["Hình 1","Hình 2","Hình 3","Hình 4"],answer:1,hint:"HV: 4 góc vuông & 4 cạnh bằng nhau."},
  {id:"M10",stem:"Cho tứ giác \\(ABCD\\) (hình 1). Biết \\(\\widehat{ABC}=120^\\circ\\). Số đo \\(\\widehat{ADC}\\) là:",img:"img/cau10.png",options:["\\(360^\\circ\\)","\\(180^\\circ\\)","\\(120^\\circ\\)","\\(60^\\circ\\)"],answer:3,hint:"Tứ giác: hai góc kề một cạnh <b>bù nhau</b> ⇒ \\(\\widehat{ADC}=180^\\circ-120^\\circ=60^\\circ\\)."},
  {id:"M11",stem:"\\(MNPQ\\) là <b>hình thang</b> (hình 2). Khi nào là <b>hình thang cân</b>?",img:"img/cau11.png",options:["\\(MQ=NP\\)","\\(NQ=4\\,\\text{cm}\\)","\\(NQ=2\\,\\text{cm}\\)","\\(NQ=5\\,\\text{cm}\\)"],answer:0,hint:"HT cân: hai cạnh bên bằng nhau ⇔ hai góc ở cùng đáy bằng nhau (SGK)."},
  {id:"M12",stem:"Với HBH \\(EFGH\\) (hình 3), mệnh đề đúng:",img:"img/cau12.png",options:["\\(EF\\parallel HG\\), \\(EH\\parallel FG\\)","Hai đường chéo vuông góc","Hai đường chéo bằng nhau","Bốn cạnh bằng nhau"],answer:0,hint:"HBH: cặp cạnh đối song song & bằng nhau; chéo cắt nhau tại trung điểm."},
  {id:"M13",stem:"Trong hình a–d (hình 4), <b>tứ giác lồi</b> là:",img:"img/cau13.png",options:["Hình a","Hình b","Hình c","Hình d"],answer:0,hint:"Tứ giác lồi: 4 góc <180°, không tự cắt; chéo cắt nhau <b>bên trong</b>."},
  {id:"M14",stem:"Tứ giác \\(ABCD\\) (hình 5) là hình gì?",img:"img/cau14.png",options:["Hình vuông","Hình thoi","Hình chữ nhật","Hình tam giác"],answer:2,hint:"Dấu hiệu HCN: có góc vuông; cạnh đối song song; chéo bằng nhau (SGK)."},
  {id:"M15",stem:"Không phải <b>dấu hiệu</b> nhận biết <b>hình thoi</b>:",options:["HBH có hai cạnh kề bằng nhau","HBH có hai đường chéo vuông góc","HBH có hai đường chéo bằng nhau","HBH có một đường chéo là phân giác một góc"],answer:2,hint:"Chéo bằng nhau là dấu hiệu HCN; hình thoi không cần chéo bằng nhau."},
  {id:"M16",stem:"Hình thoi có <b>một góc vuông</b> là:",options:["Hình vuông","Hình bình hành","Hình chữ nhật","Hình thang cân"],answer:0,hint:"Thêm 1 góc vuông + 4 cạnh bằng nhau ⇒ hình vuông."},
  {id:"M17",stem:"Tứ giác trong <b>hình 2</b> là:",img:"img/cau17.png",options:["Hình thoi","Hình vuông","Hình thang cân","Hình chữ nhật"],answer:3,hint:"Dấu hiệu HCN (SGK): <b>hai đường chéo bằng nhau</b> (theo hình)."}
],
multi10:[
  {id:"B1",title:"Bài 1: Rút gọn đơn thức – hệ số & bậc. (CHỌN CÂU ĐÚNG)",items:[
    ["\\(5x^{3}\\cdot xy=5x^{4}y\\).",1],
    ["Bậc của \\(5x^{4}y\\) là 5.",1],
    ["\\((4x^{2})(-4xy)=-16x^{3}y\\).",1],
    ["\\(\\tfrac{1}{4}xyz\\cdot(2xy)=\\tfrac{1}{2}x^{2}y^{2}z\\).",1],
    ["Thu gọn \\(x\\cdot x\\cdot y=x^{2}y\\).",1],
    ["\\(5x^{2}y^{-1}\\) là hạng tử của đa thức.",0]
  ],hint:"Bậc đơn thức = tổng số mũ (không âm). Mũ âm → không là hạng tử của đa thức."},

  {id:"B2",title:"Bài 2: Hạng tử của đa thức. (CHỌN CÂU ĐÚNG)",items:[
    ["Hạng tử là mỗi đơn thức trong đa thức.",1],
    ["\\(A=x^{4}+xy+\\tfrac{2}{3}\\) có 3 hạng tử.",1],
    ["Các hạng tử đồng dạng có thể cộng gộp.",1],
    ["\\(x/y\\) là hạng tử của đa thức.",0],
    ["Bậc đa thức là bậc của hạng tử <b>lớn nhất</b>.",1]
  ],hint:"Đa thức không có biến ở mẫu; bậc là lớn nhất trong các hạng tử."},

  {id:"B3",title:"Bài 3: Cộng – trừ – nhân – chia. (CHỌN CÂU ĐÚNG)",items:[
    ["\\(4xy-8xy=-4xy\\).",1],
    ["\\(10xy:5xy=2\\).",1],
    ["\\((4xy-5x^{2})+(2xy-5x^{2})=6xy-10x^{2}\\).",1],
    ["\\(\\dfrac{x^{2}y}{xy}=x\\).",1],
    ["\\(\\dfrac{x^{2}y}{x^{2}}=y\\).",1]
  ],hint:"Cộng/trừ: gộp đồng dạng. Nhân: cộng mũ. Chia: trừ mũ tương ứng."},

  {id:"B4",title:"Bài 4: Giá trị đa thức – thay số. (CHỌN CÂU ĐÚNG)",items:[
    ["Quy tắc ưu tiên: lũy thừa → nhân/chia → cộng/trừ.",1],
    ["Rút gọn trước khi thay số để tránh sai.",1],
    ["Nếu \\(y=0\\) thì hạng tử chứa \\(y\\) bằng 0.",1],
    ["Nếu \\(x=-1\\) thì \\(x^{2}=1\\).",1]
  ],hint:"Nên thu gọn trước khi thế số; theo đúng thứ tự phép tính."},

  {id:"B5",title:"Bài 5: Tìm đa thức \\(M\\) (dạng \\(M+P=Q\\)). (CHỌN CÂU ĐÚNG)",items:[
    ["\\(M=Q-P\\).",1],
    ["Trừ đa thức = cộng với <b>đối</b> của đa thức trừ.",1],
    ["\\((6x^{2}+10xy-y^{2})-(5x^{2}-2xy)=x^{2}+12xy-y^{2}\\).",1],
    ["Hạng tử không đồng dạng giữ nguyên khi cộng/trừ.",1]
  ],hint:"Nhớ đổi dấu các hạng tử của đa thức bị trừ."},

  {id:"B6",title:"Bài 6: Chia hết đa thức (định lý phần dư). (CHỌN CÂU ĐÚNG)",items:[
    ["\\(A(x)\\) chia hết cho \\(x-a\\) ⇔ \\(A(a)=0\\).",1],
    ["Với \\(2x-3\\), thay \\(x=\\tfrac{3}{2}\\).",1],
    ["Nếu \\(A(\\tfrac{3}{2})\\neq 0\\) thì không chia hết cho \\(2x-3\\).",1]
  ],hint:"Định lý phần dư trong SGK: \(A(a)=0\) ⇔ \(x-a\) là nhân tử."},

  {id:"B7",title:"Bài 7: Ứng dụng đại số – hình học phẳng. (CHỌN CÂU ĐÚNG)",items:[
    ["\\(V=S_{\\text{đáy}}\\cdot h\\).",1],
    ["\\(S_{\\text{đáy}}=6x+8y^{2},\\,h=x+2\\Rightarrow V=(6x+8y^{2})(x+2)\\).",1],
    ["Nếu \\(S=6x^{2}-4xy\\), rộng \\(=2xy\\) thì dài \\(=\\dfrac{6x^{2}-4xy}{2xy}\\).",1],
    ["Có thể ra phân thức khi chia, cần rút gọn đúng.",1]
  ],hint:"Áp dụng công thức S, V; có thể xuất hiện phân thức khi chia."},

  {id:"B8",title:"Bài 8: Hình học – tứ giác, HBH, HCN, HT cân, HV. (CHỌN CÂU ĐÚNG)",items:[
    ["Tổng góc tứ giác = \\(360^{\\circ}\\).",1],
    ["HBH: các cặp cạnh đối song song.",1],
    ["HCN: hai đường chéo bằng nhau.",1],
    ["HT cân: hai góc ở cùng một đáy bằng nhau.",1],
    ["HV: vừa 4 góc vuông vừa 4 cạnh bằng.",1]
  ],hint:"Các tính chất/ dấu hiệu đúng như SGK Kết nối tri thức."}
]};

/* ====================== TIỆN ÍCH ====================== */
const $=(s,r=document)=>r.querySelector(s);
const el=(t,a={})=>{const e=document.createElement(t);Object.assign(e,a);return e};
const clone=o=>JSON.parse(JSON.stringify(o));
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}
function tex(n){ if(window.MathJax) MathJax.typesetPromise([n]); }

/* ====================== STATE ====================== */
let RAW=null,STATE=null;
let picksMC=new Map(); // qi -> oi
let picksDS=new Map(); // `${bi}-${i}` -> 1 nếu tick

/* ====================== RENDER MCQ ====================== */
function renderMC(){
  const mount=$("#mcqs"); mount.innerHTML=""; picksMC.clear();
  STATE.mcqs.forEach((q,qi)=>{
    const card=el("div",{className:"card"});
    const stem=el("div",{className:"stem"}); stem.innerHTML=`<span style="color:#64748b">Câu ${qi+1}:</span> ${q.stem}`;
    card.appendChild(stem);
    if(q.img){ const im=el("img",{className:"figure",src:q.img,alt:"minh họa",loading:"lazy"}); card.appendChild(im); }

    q.options.forEach((op,oi)=>{
      const row=el("label",{className:"opt"});
      const i=el("input",{type:"radio",name:"mc_"+qi});
      const sp=el("span"); sp.innerHTML=op;

      i.addEventListener("change",()=>{
        picksMC.set(qi,oi);
        card.querySelectorAll(".opt").forEach(r=>r.style.background="");
        row.style.background = (oi===q.answer) ? "#ecfeff" : "#fee2e2";
      });

      row.append(i,sp); card.appendChild(row);
    });

    const b=el("button",{className:"btn-ghost",textContent:"Gợi ý"});
    const hint=el("div",{className:"hint"}); hint.innerHTML=q.hint||"";
    b.onclick=()=>{hint.style.display="block"; tex(hint);};
    card.append(b,hint);

    mount.appendChild(card); tex(card);
  });
}

/* ====================== RENDER DS ====================== */
function renderDS(){
  const root=$("#ds"); root.innerHTML=""; picksDS.clear();
  STATE.ds.forEach((qs,bi)=>{
    const card=el("div",{className:"card"});
    const stem=el("div",{className:"stem"}); stem.innerHTML=`<b>${qs.title}</b>`;
    card.appendChild(stem);

    if(qs.img){ const im=el("img",{className:"figure",src:qs.img,alt:"minh họa",loading:"lazy"}); card.appendChild(im); }

    qs.items.forEach((it,i)=>{
      const text=it[0];
      const row=el("label",{className:"opt"});
      const ck=el("input",{type:"checkbox"});
      ck.addEventListener("change",()=>{
        picksDS.set(`${bi}-${i}`, ck.checked?1:0);
        row.style.background = ck.checked ? "#f1f5f9" : "";
      });
      const span=el("span"); span.innerHTML=text;
      row.append(ck,span); card.appendChild(row);
    });

    const b=el("button",{className:"btn-ghost",textContent:"Gợi ý"});
    const hint=el("div",{className:"hint"}); hint.innerHTML=qs.hint||"";
    b.onclick=()=>{hint.style.display="block"; tex(hint);};
    card.append(b,hint);

    root.appendChild(card); tex(card);
  });
}

/* ====================== CHẤM ĐIỂM ====================== */
function gradeAll(){
  // MCQ
  let mcOK=0, mcTotal=STATE.mcqs.length;
  $("#mcqs").querySelectorAll(".card").forEach((card,qi)=>{
    const ans=STATE.mcqs[qi].answer, picked=picksMC.get(qi);
    card.querySelectorAll(".opt").forEach((row,oi)=>{
      if(oi===ans) row.style.outline="2px solid var(--ok)";
      if(picked===oi) row.style.background=(oi===ans)?"#ecfeff":"#fee2e2";
    });
    if(picked===ans) mcOK++;
  });

  // DS: điểm = số ý ĐÚNG được tick; tick sai không trừ
  let dsOK=0, dsTotal=0;
  $("#ds").querySelectorAll(".card").forEach((card,bi)=>{
    const items=STATE.ds[bi].items;
    card.querySelectorAll(".opt").forEach((row,i)=>{
      const isTrue=items[i][1]===1;
      const picked=picksDS.get(`${bi}-${i}`)===1;
      if(isTrue){
        dsTotal++;
        row.style.outline="2px dashed var(--ok)";
        if(picked){ dsOK++; row.style.background="#ecfeff"; }
      }else{
        if(picked){ row.style.background="#fee2e2"; } // cảnh báo, không trừ
      }
    });
  });

  const totalOK=mcOK+dsOK, total=mcTotal+dsTotal;
  $("#resultbar").innerHTML=`<b>Kết quả:</b> Trắc nghiệm <b>${mcOK}/${mcTotal}</b> • Mệnh đề <b>${dsOK}/${dsTotal}</b> • Tổng <b>${totalOK}/${total}</b>`;
  $("#resultbar").scrollIntoView({behavior:"smooth",block:"center"});
}

/* ====================== RESET ====================== */
function resetAll(shuffleAll=false){
  const d={mcqs:clone(DATA.mcqs), ds:clone(DATA.multi10)};
  if(shuffleAll){
    shuffle(d.mcqs);
    d.mcqs.forEach(q=>{
      const ord=q.options.map((_,i)=>i); shuffle(ord);
      q.options=ord.map(i=>q.options[i]);
      q.answer=ord.indexOf(q.answer);
    });
    shuffle(d.ds);
  }
  RAW=clone(d); STATE=clone(d);
  picksMC.clear(); picksDS.clear();
  renderMC(); renderDS();
  $("#resultbar").textContent="Chưa chấm. Điểm sẽ hiện tại đây.";
}

/* ====================== BOOT ====================== */
(function(){
  RAW={mcqs:clone(DATA.mcqs), ds:clone(DATA.multi10)};
  STATE=clone(RAW);
  renderMC(); renderDS();
  $("#btnKeep").onclick=()=>resetAll(false);
  $("#btnShuffle").onclick=()=>resetAll(true);
  $("#btnGrade").onclick=gradeAll;
})();
</script>
</body>
</html>
